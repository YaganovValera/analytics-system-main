import type { OrderBookAnalysis } from '../../types/orderbook';
import './OrderBookSummary.css';

interface Props {
  analysis: OrderBookAnalysis;
}

function OrderBookSummary({ analysis }: Props) {
  const {
    avg_spread_percent,
    avg_bid_volume_top10,
    avg_ask_volume_top10,
    imbalance_end,
    bid_slope,
    ask_slope,
    max_bid_wall_price,
    max_bid_wall_volume,
    max_ask_wall_price,
    max_ask_wall_volume,
  } = analysis;

  const spread = avg_spread_percent * 100;
  const imbalance = imbalance_end;

  let spreadText = '–°–ø—Ä–µ–¥ –º–µ–∂–¥—É –ª—É—á—à–∏–º–∏ –∑–∞—è–≤–∫–∞–º–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –Ω–æ—Ä–º–µ, —á—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ä–µ–¥–Ω—é—é –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å.';
  if (spread < 0.03) {
    spreadText = '–û—á–µ–Ω—å —É–∑–∫–∏–π —Å–ø—Ä–µ–¥ ‚Äî —Ä—ã–Ω–æ–∫ –æ–±–ª–∞–¥–∞–µ—Ç –≤—ã—Å–æ–∫–æ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é, —Å–¥–µ–ª–∫–∏ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ–º.';
  } else if (spread > 0.2) {
    spreadText = '–®–∏—Ä–æ–∫–∏–π —Å–ø—Ä–µ–¥ ‚Äî –Ω–∏–∑–∫–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–≤–µ—Ä—à–∏—Ç—å —Å–¥–µ–ª–∫—É —Å –æ–±—ä—ë–º–æ–º –≤–æ–∑–º–æ–∂–Ω—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è.';
  }

  let imbalanceText = '–ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É BID –∏ ASK –æ–±—ä—ë–º–∞–º–∏ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã ‚Äî –Ω–µ—Ç —è–≤–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–æ—Å–∞.';
  if (imbalance > 0.3) {
    imbalanceText = '–ù–∞–±–ª—é–¥–∞–µ—Ç—Å—è –ø—Ä–µ–æ–±–ª–∞–¥–∞–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π: –≤ BID-—Å–µ–≥–º–µ–Ω—Ç–µ —Å—Ç–∞–∫–∞–Ω–∞ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–æ –±–æ–ª—å—à–µ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏.';
  } else if (imbalance < -0.3) {
    imbalanceText = '–ü—Ä–µ–æ–±–ª–∞–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ ‚Äî –æ–±—ä—ë–º—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ ASK –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–≤—ã—à–∞—é—Ç BID.';
  }

  const volumeText = avg_bid_volume_top10 > avg_ask_volume_top10
    ? '–ü–æ–∫—É–ø–∞—Ç–µ–ª–∏ –¥–æ–º–∏–Ω–∏—Ä—É—é—Ç –≤ –±–ª–∏–∂–∞–π—à–∏—Ö —É—Ä–æ–≤–Ω—è—Ö: BID –∑–∞—è–≤–æ–∫ –±–æ–ª—å—à–µ, —á–µ–º ASK.'
    : avg_ask_volume_top10 > avg_bid_volume_top10
    ? '–í ASK-—Å–µ–≥–º–µ–Ω—Ç–µ –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è –±–æ–ª—å—à–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å ‚Äî –ø—Ä–æ–¥–∞–≤—Ü—ã –±–æ–ª–µ–µ –∞–∫—Ç–∏–≤–Ω—ã.'
    : 'BID –∏ ASK –æ–±—ä–µ–º—ã —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω—ã ‚Äî —Å–ø—Ä–æ—Å –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ.';

  const slopeText = (bid_slope < -1 || ask_slope < -1)
    ? '–ì–ª—É–±–∏–Ω–∞ —Å—Ç–∞–∫–∞–Ω–∞ —Ä–µ–∑–∫–æ —É–±—ã–≤–∞–µ—Ç –≤–¥–∞–ª—å –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã ‚Äî –æ–±—ä—ë–º—ã —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤–±–ª–∏–∑–∏ –ª—É—á—à–µ–π —Ü–µ–Ω—ã. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–µ–∑–∫–∏—Ö –æ—Ä–¥–µ—Ä–∞—Ö.'
    : '–°—Ç–∞–∫–∞–Ω —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ: –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–∞–∫ —É –±–ª–∏–∂–∞–π—à–∏—Ö —É—Ä–æ–≤–Ω–µ–π, —Ç–∞–∫ –∏ –¥–∞–ª—å—à–µ –æ—Ç —Ü–µ–Ω—ã. –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ —Ä–µ–∑–∫–∏—Ö —Ü–µ–Ω–æ–≤—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–π.';

  const wallsText = (max_bid_wall_volume > 0 || max_ask_wall_volume > 0)
    ? `–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫—Ä—É–ø–Ω—ã–µ –∑–∞—è–≤–∫–∏ (—Ü–µ–Ω–æ–≤—ã–µ "—Å—Ç–µ–Ω—ã"): BID –Ω–∞ —É—Ä–æ–≤–Ω–µ ${max_bid_wall_price}, –æ–±—ä—ë–º ${max_bid_wall_volume}; ASK –Ω–∞ —É—Ä–æ–≤–Ω–µ ${max_ask_wall_price}, –æ–±—ä—ë–º ${max_ask_wall_volume}. –≠—Ç–∏ —É—Ä–æ–≤–Ω–∏ –º–æ–≥—É—Ç —Å–ª—É–∂–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è–º–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞–º–∏.`
    : '–Ø–≤–Ω–æ –≤—ã—Ä–∞–∂–µ–Ω–Ω—ã—Ö —Ü–µ–Ω–æ–≤—ã—Ö "—Å—Ç–µ–Ω" –≤ —Å—Ç–∞–∫–∞–Ω–µ –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞.';

  return (
    <div className="orderbook-summary">
      <h3>üìä –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä—ã–Ω–æ—á–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã</h3>
      <p><strong>–°–ø—Ä–µ–¥:</strong> {spreadText}</p>
      <p><strong>–î–∏—Å–±–∞–ª–∞–Ω—Å:</strong> {imbalanceText}</p>
      <p><strong>–û–±—ä—ë–º—ã BID vs ASK:</strong> {volumeText}</p>
      <p><strong>–ì–ª—É–±–∏–Ω–∞ —Å—Ç–∞–∫–∞–Ω–∞:</strong> {slopeText}</p>
      <p><strong>–ö—Ä—É–ø–Ω—ã–µ –∑–∞—è–≤–∫–∏:</strong> {wallsText}</p>
    </div>
  );
}

export default OrderBookSummary;
